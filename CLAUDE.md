# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

This is a Next.js 15 application called "portal" that implements authentication using Better Auth and PostgreSQL. The project uses TypeScript, Tailwind CSS v4, and pnpm as the package manager.

## Development Commands

### Core Development
- `pnpm dev` - Start development server with Turbopack (runs on http://localhost:3000)
- `pnpm build` - Build the production application
- `pnpm start` - Start the production server
- `pnpm lint` - Run ESLint for code quality checks

### Package Management
- `pnpm install` - Install dependencies (preferred over npm/yarn)

## Architecture

### Authentication System
The application uses Better Auth for authentication with PostgreSQL as the database:

- **Server-side auth**: `src/lib/auth.ts` - Main auth configuration with Better Auth
- **Client-side auth**: `src/lib/auth-client.ts` - React client for auth operations  
- **API routes**: `src/app/api/auth/[...all]/route.ts` - Handles all auth endpoints via catch-all route
- **Database**: PostgreSQL with connection string from `DATABASE_URL` environment variable
- **Migrations**: Better Auth migrations stored in `better-auth_migrations/`

#### Better Auth Implementation Patterns

**Authentication Flows:**
```typescript
// Sign Up
await authClient.signUp.email({
  email, password, name,
  callbackURL: "/dashboard"
})

// Sign In  
await authClient.signIn.email({
  email, password,
  rememberMe: true
})

// Session Management
const { data: session } = authClient.useSession() // Client-side
const session = await auth.api.getSession({ headers }) // Server-side
```

**Configuration:**
- Enable features via `emailAndPassword: { enabled: true }`
- Add plugins in `plugins: [username(), twoFactor()]` array
- Use error handling pattern: `const { data, error } = await authClient.method()`

### Database Schema
The auth system includes these tables:
- `user` - User accounts with email, name, and profile data
- `session` - Active user sessions with tokens and metadata
- `account` - OAuth/credential accounts linked to users
- `verification` - Email/phone verification tokens

### Project Structure
- **Next.js App Router**: Uses the `src/app/` directory structure
- **TypeScript paths**: `@/*` maps to `./src/*` for imports
- **Styling**: Tailwind CSS v4 with PostCSS configuration
- **Fonts**: Uses Geist Sans and Geist Mono via next/font/google

## Environment Variables

Required environment variables:
- `DATABASE_URL` - PostgreSQL connection string for Better Auth

## Development Notes

- The project uses Next.js 15 with React 19
- Turbopack is enabled for faster development builds
- ESLint is configured with Next.js and TypeScript rules
- The auth client is configured for localhost:3000 in development
- Database migrations are auto-generated by Better Auth